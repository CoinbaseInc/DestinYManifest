<?xml version="1.0"?>

<!--

  c172p glass effects.

    Copyright (c) 2015 Wayne Bragg

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

-->

<system name="c172p-glass-effects">

    <channel name="rain">

        <fcs_function name="glass-effects/splashxas">
            <description>interpolate airspeed to windshield rain flow</description>
            <function>
                <interpolate1d>
                    <property>/velocities/airspeed-kt</property>
                    <v> 0 </v>  <v> -0.1 </v>
                    <v> 72.5 </v>  <v> -0.3 </v>
                    <v> 145 </v>  <v>-1.8 </v>
                </interpolate1d>
            </function>
            <output>/environment/aircraft-effects/splash-vector-x</output>
        </fcs_function>

        <fcs_function name="glass-effects/splashy">
            <function>
               <value>0.0</value>
            </function>
            <output>/environment/aircraft-effects/splash-vector-y</output>
        </fcs_function>

        <fcs_function name="glass-effects/splashzas">
            <description>interpolate airspeed to windshield rain flow</description>
            <function>
                <interpolate1d>
                    <property>/velocities/airspeed-kt</property>
                    <v> 0 </v>  <v> 1 </v>
                    <v> 72.5 </v>  <v> 1.25 </v>
                    <v> 145 </v>  <v> 1.5 </v>
                </interpolate1d>
            </function>
            <output>/environment/aircraft-effects/splash-vector-z</output>
        </fcs_function>

        <fcs_function name="glass-effects/splashxrpm">
            <description>interpolate airspeed to windshield rain flow</description>
            <function>
                <interpolate1d>
                    <property>/engines/active-engine/rpm</property>
                    <v> 600 </v>  <v> -0.1 </v>
                    <v> 1000 </v>  <v> -0.3 </v>
                    <v> 2300</v>  <v>-1.8 </v>
                </interpolate1d>
            </function>
            <output>/environment/aircraft-effects/splash-vector-x</output>
        </fcs_function>

        <fcs_function name="glass-effects/splashzrpm">
            <description>interpolate airspeed to windshield rain flow</description>
            <function>
                <interpolate1d>
                    <property>/engines/active-engine/rpm</property>
                    <v> 600 </v>  <v> 1 </v>
                    <v> 1000 </v>  <v> 1.25 </v>
                    <v> 2300 </v>  <v> 1.5 </v>
                </interpolate1d>
            </function>
            <output>/environment/aircraft-effects/splash-vector-z</output>
        </fcs_function>


    </channel>

</system>
